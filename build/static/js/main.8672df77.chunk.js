(this["webpackJsonpreact-demo"]=this["webpackJsonpreact-demo"]||[]).push([[0],{31:function(e,t,a){e.exports=a.p+"static/media/noImg.47bba546.jpeg"},35:function(e,t,a){e.exports=a.p+"static/media/loading.78808d30.gif"},36:function(e,t,a){e.exports=a(69)},65:function(e,t,a){},66:function(e,t,a){},69:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(30),c=a.n(l),o=a(13),s=a(5),m=a(6),i=a(8),u=a(7),p=(r.a.Component,n.Component,a(11)),d=a.n(p),E=a(15),h=a(12),v=a.n(h),g="https://exp-rest-api.herokuapp.com",f=function(e){var t=e.msg;return r.a.createElement("div",{class:"alert alert-danger col-md-6"},r.a.createElement("h6",null,t||"Something went wrong!"))},b=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={hasError:!1,username:"",password:""},e.handleUsername=function(t){e.setState({username:t.target.value})},e.handlePwd=function(t){e.setState({password:t.target.value})},e.login=function(){var t=Object(E.a)(d.a.mark((function t(a){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.prev=1,console.log("Submitted",e.state),t.next=5,v.a.post(g+"/api/users/login",e.state);case 5:n=t.sent,console.log(n),e.setState({hasError:!1}),localStorage.setItem("token",n.data.token),e.props.history.push("/products"),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),e.setState({hasError:!0});case 15:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"col-md-8"},this.state.hasError&&r.a.createElement(f,{msg:"Wrong username or password"}),r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h1",null,"Login")),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{onSubmit:this.login},r.a.createElement("div",null,r.a.createElement("input",{type:"text",onChange:this.handleUsername,className:"form-control",placeholder:"Username"}),r.a.createElement("br",null)),r.a.createElement("div",null,r.a.createElement("input",{type:"password",onChange:this.handlePwd,className:"form-control",placeholder:"password"}),r.a.createElement("br",null)),r.a.createElement("div",null,r.a.createElement("button",{type:"submit",className:"btn btn-success"},"Login"))))))}}]),a}(n.Component),N=function(e){var t=e.name;return r.a.createElement("h4",null,"Hello, ",t)},k=r.a.createContext(),w=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",null,"Parent"),r.a.createElement(k.Provider,{value:100},r.a.createElement(y,null)))},y=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",null,"Level 1"),r.a.createElement(S,null))},S=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",null,"Level 2"),r.a.createElement(C,null))},C=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",null,"Level 3"),r.a.createElement(k.Consumer,null,(function(e){return r.a.createElement("h4",null,e)})))},x=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(N,{name:10}),r.a.createElement("h1",null,"Home Component"),r.a.createElement(w,null))},j=function(){return r.a.createElement("h1",null,"About Component")},O=function(){return r.a.createElement("h1",null,"Contact Component")},P=a(31),I=a.n(P),D=a(32),F=a.n(D),A=function(){return{headers:{authorization:localStorage.getItem("token")}}},L=function(e){var t=new FormData;t.append("brand",e.brand),t.append("model",e.model),t.append("price",e.price),t.append("inStock",e.inStock),t.append("img",e.image);var a={headers:{"content-type":"multipart/form-data",authorization:localStorage.getItem("token")}};return v.a.post("".concat(g,"/api/products"),t,a)},B=a(3),M=function(e){var t=e.product,a=e.onDelete,n=function(){var e=Object(E.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n=t._id,v.a.delete("".concat(g,"/api/products/").concat(n),A());case 3:a(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}var n}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"col-lg-8 col-md-6 col-sm-12"},r.a.createElement("div",{className:"card"},r.a.createElement("img",{alt:"img",className:"card-img-top",src:t.image?t.image:I.a}),r.a.createElement("h4",{className:"card-header"},t.brand," ",t.model),r.a.createElement(B.b,{to:"/product/".concat(t._id)},r.a.createElement("div",{className:"card-body"},r.a.createElement("ul",{className:"list-group list-group-flush"},r.a.createElement("li",{className:"list-group-item"},"$",t.price),r.a.createElement("li",{className:"list-group-item"},"InStock?: ",r.a.createElement("input",{type:"checkbox",readOnly:!0,checked:t.inStock})),r.a.createElement("li",{className:"list-group-item"},"Updated: ",F()(t.lastUpdated).fromNow())))),r.a.createElement("div",{className:"card-footer"},r.a.createElement("button",{disabled:!t.inStock,className:"btn btn-primary"},"Add to cart \xa0",r.a.createElement("i",{className:"fa fa-cart-plus"})),r.a.createElement("button",{onClick:n,className:"btn btn-danger pull-right"},"Delete \xa0",r.a.createElement("i",{className:"fa fa-trash"})))),r.a.createElement("br",null))},U=(a(65),a(35)),z=a.n(U),H=function(){return r.a.createElement("div",{className:"loader"},r.a.createElement("img",{alt:"loading",src:z.a}),"Loading...")},_=function(){return r.a.createElement("div",{style:{margin:"10px"}},r.a.createElement(B.b,{to:"/product/new"},r.a.createElement("button",{className:"btn btn-danger"},"New Product \xa0",r.a.createElement("i",{className:"fa fa-plus"}))))},J=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).onDel=function(){return e.get()},e.get=Object(E.a)(d.a.mark((function t(){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n=e.state.page,r=e.state.pageSize,v.a.get("".concat(g,"/api/products/").concat(n,"/").concat(r),A());case 3:a=t.sent,e.setState({totalPages:a.data.metadata.pages,products:a.data.data,loading:!1}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),e.props.history.push("/login");case 10:case"end":return t.stop()}var n,r}),t,null,[[0,7]])}))),e.prev=function(){var t=e.state.page;e.setState({page:t-1},(function(){e.get()}))},e.next=function(){var t=e.state.page;e.setState({page:t+1},(function(){e.get()}))},e.state={page:0,pageSize:200,products:[],error:!1,loading:!0,totalPages:0},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.get()}},{key:"render",value:function(){var e=this,t=this.state,a=t.error,n=t.loading,l=t.products;return r.a.createElement("div",{className:"offset-md-1 col-md-8"},r.a.createElement("div",null,r.a.createElement("h2",null,"Products"),r.a.createElement(_,null),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"pull-left"},r.a.createElement("h4",null,"Showing page ",this.state.page+1," of ",this.state.totalPages)),r.a.createElement("div",{class:"pull-right"},r.a.createElement("button",{disabled:0===this.state.page,onClick:this.prev,style:{margin:"5px"},className:"btn btn-info"},r.a.createElement("i",{className:"fa fa-arrow-left"})),r.a.createElement("button",{disabled:this.state.page===this.state.totalPages-1,onClick:this.next,className:"btn btn-info"},r.a.createElement("i",{className:"fa fa-arrow-right"}))))),a&&r.a.createElement(f,null),n&&r.a.createElement(H,null),l.map((function(t){return r.a.createElement(M,{key:t._id,product:t,onDelete:e.onDel})})))}}]),a}(n.Component),R=function(e){return r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark"},r.a.createElement("a",{className:"navbar-brand",href:"/"},"My Cool App"),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNav"},r.a.createElement("ul",{className:"navbar-nav"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(B.b,{to:"/",className:"nav-link"},"Home")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(B.b,{to:"/about",className:"nav-link"},"About")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(B.b,{to:"/products",className:"nav-link"},"Products")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(B.b,{to:"/contact",className:"nav-link"},"Contact")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(B.b,{to:"/login"},r.a.createElement("button",{class:"btn btn-danger"},"Login"))),r.a.createElement("li",{className:"nav-item"},r.a.createElement("button",{class:"btn btn-danger",onClick:function(){localStorage.removeItem("token")}},"Logout")))))},W=function(){return r.a.createElement("div",{className:"navbar navbar-expand-lg navbar-dark bg-dark"},"\xa92020 products.com")},$=function(){return r.a.createElement("h1",null,"Not Found")},q=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={brand:"",model:"",price:0,inStock:!1,hasError:!0,errors:[]},e.onBrandChange=function(t){e.setState({brand:t.target.value})},e.validate=function(){var t=[];e.state.brand||t.push("Brand is Invalid"),e.state.model||t.push("Model is Invalid"),e.state.price||t.push("Price is Invalid"),t.length>0?e.setState({hasError:!0,errors:t}):e.setState({hasError:!1})},e.onSave=function(){e.validate(),e.state.hasError||L(e.state).then((function(t){return e.props.history.push("/products")})).catch((function(e){return console.log(e)}))},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"col-md-4"},this.state.hasError&&this.state.errors.length>0&&r.a.createElement(G,{errors:this.state}),r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header"},"Add New Component"),r.a.createElement("div",{className:"card-body"},r.a.createElement("input",{className:"form-control",onChange:this.onBrandChange,placeholder:"Enter Brand",type:"text"}),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Model",onChange:function(t){return e.setState({model:t.target.value})}}),r.a.createElement("input",{type:"number",className:"form-control",placeholder:"Price",onChange:function(t){return e.setState({price:t.target.value})}}),"Instock: ",r.a.createElement("input",{type:"checkbox",onChange:function(t){return e.setState({inStock:t.target.checked})}}),r.a.createElement("input",{type:"file",onChange:function(t){return e.setState({image:t.target.files[0]})}})),r.a.createElement("div",{className:"card-footer"},r.a.createElement("button",{onClick:this.onSave,class:"btn btn-success"},"Save"))))}}]),a}(n.Component),G=function(e){var t=e.errors;return r.a.createElement("div",{className:"alert alert-danger"},r.a.createElement("ul",{class:"list-group list-group-flush"},t.map((function(e){return r.a.createElement("li",{class:"list-group-item"},e)}))))},K=(a(66),a(67),a(68),function(e){var t=e.review;return r.a.createElement(r.a.Fragment,null,r.a.createElement("b",null,t.name),r.a.createElement("h6",null,t.subject,"  Rating: ",t.rating," *"),r.a.createElement("div",null,t.message),r.a.createElement("hr",null))}),Q=function(e){var t=e.reviews;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",null,"Reviews"),r.a.createElement("hr",null),t&&t.map((function(e){return r.a.createElement(K,{review:e})})),(!t||0===t.length)&&r.a.createElement("h5",null,"Be the first one to review"))},T=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={product:{}},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;(function(e){return v.a.get("".concat(g,"/api/products/").concat(e),A())})(this.props.match.params.id).then((function(t){return e.setState({product:t.data})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Product Detail"),r.a.createElement(M,{product:this.state.product}),r.a.createElement(Q,{reviews:this.state.product.reviews}))}}]),a}(n.Component);var V=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(R,null),r.a.createElement(o.c,null,r.a.createElement(o.a,{exact:!0,path:"/",component:x}),r.a.createElement(o.a,{path:"/about",component:j}),r.a.createElement(o.a,{path:"/contact",component:O}),r.a.createElement(o.a,{path:"/login",component:b}),r.a.createElement(o.a,{path:"/products",component:J}),r.a.createElement(o.a,{path:"/product/new",component:q}),r.a.createElement(o.a,{path:"/product/:id",component:T}),r.a.createElement(o.a,{path:"*",component:$})),r.a.createElement(W,null))};c.a.render(r.a.createElement(B.a,null,r.a.createElement(V,null)),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.8672df77.chunk.js.map